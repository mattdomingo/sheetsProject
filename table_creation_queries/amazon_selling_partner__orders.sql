-- Amazon Selling Partner Orders table creation query
-- Contains order data from Amazon Selling Partner API
CREATE OR REPLACE TABLE `sheets_base_schema.amazon_selling_partner__orders` (
  `source_relation` STRING OPTIONS(description = 'The `<database>`.`<schema>` this record came from.'),
  `amazon_order_id` STRING OPTIONS(description = 'An Amazon-defined order identifier, in 3-7-7 format.'),
  `marketplace_id` STRING OPTIONS(description = 'The unobfuscated marketplace identifier. Different marketplace values can be found [here](https://developer-docs.amazon.com/sp-api/docs/marketplace-ids).'),
  `replaced_order_id` STRING OPTIONS(description = 'The order ID value for the order that is being replaced. Returned only if IsReplacementOrder = true.'),
  `seller_order_id` STRING OPTIONS(description = 'An order identifier that is specified by the seller. Used to select only the orders that match the order identifier. If SellerOrderId is specified, then FulfillmentChannels, OrderStatuses, PaymentMethod, LastUpdatedAfter, LastUpdatedBefore, and BuyerEmail cannot be specified.'),
  `buyer_info_purchase_order_number` STRING OPTIONS(description = 'The purchase order (PO) number entered by the buyer at checkout. Only returned for orders where the buyer entered a PO number at checkout.'),
  `purchase_date` TIMESTAMP OPTIONS(description = 'The date when the order was created.'),
  `sales_channel` STRING OPTIONS(description = 'The sales channel for the first item in the order.'),
  `order_channel` STRING OPTIONS(description = 'The order channel for the first item in the order.'),
  `order_type` STRING OPTIONS(description = 'The order\'s type. Possible values can be found [here](https://developer-docs.amazon.com/sp-api/docs/orders-api-v0-reference#ordertype).'),
  `order_status` STRING OPTIONS(description = 'The current order status. Possible values can be found [here](https://developer-docs.amazon.com/sp-api/docs/orders-api-v0-reference#orderstatus).'),
  `payment_method` STRING OPTIONS(description = 'The payment method for the order. This property is limited to COD and CVS payment methods. Unless you need the specific COD payment information provided by the PaymentExecutionDetailItem object, Amazon recommends using the PaymentMethodDetails table to get payment method information.'),
  `order_total_amount` NUMERIC OPTIONS(description = 'The total charge for this order.'),
  `order_total_currency_code` STRING OPTIONS(description = 'The three-digit currency code in which the order total is measured. In ISO 4217 format.'),
  `promise_response_due_date` STRING OPTIONS(description = 'Indicates the date by which the seller must respond to the buyer with an estimated ship date. Only returned for Sourcing on Demand orders.'), --different than fivetran
  `last_update_date` TIMESTAMP OPTIONS(description = 'The date when the order was last updated. Note: LastUpdateDate is returned with an incorrect date for orders that were last updated before 2009-04-01.'),
  `latest_delivery_date` TIMESTAMP OPTIONS(description = 'The end of the time period within which you have committed to fulfill the order. In ISO 8601 date time format. Only returned for seller-fulfilled orders that do not have a PendingAvailability, Pending, or Canceled status.'),
  `latest_ship_date` TIMESTAMP OPTIONS(description = 'The end of the time period within which you have committed to ship the order. In ISO 8601 date time format. Only returned for seller-fulfilled orders. Note: LatestShipDate might not be returned for orders placed before February 1, 2013.'),
  `number_of_items_shipped` INT64 OPTIONS(description = 'The number of items shipped for the order.'),
  `number_of_items_unshipped` INT64 OPTIONS(description = 'The number of items unshipped for the order.'),
  `earliest_delivery_date` TIMESTAMP OPTIONS(description = 'The start of the time period within which you have committed to fulfill the order. In ISO 8601 date time format. Only returned for seller-fulfilled orders.'),
  `earliest_ship_date` TIMESTAMP OPTIONS(description = 'The start of the time period within which you have committed to ship the order. In ISO 8601 date time format. Only returned for seller-fulfilled orders. Note: EarliestShipDate might not be returned for orders placed before February 1, 2013.'),
  `easy_ship_shipment_status` STRING OPTIONS(description = 'The status of the Amazon Easy Ship order. This property is only included for Amazon Easy Ship orders. Possible values can be found [here](https://developer-docs.amazon.com/sp-api/docs/orders-api-v0-reference#easyshipshipmentstatus).'),
  `electronic_invoice_status` STRING OPTIONS(description = 'The status of the electronic invoice. Only available for Easy Ship orders and orders in the BR marketplace. Possible values can be found [here](https://developer-docs.amazon.com/sp-api/docs/orders-api-v0-reference#electronicinvoicestatus).'),
  `fulfillment_channel` STRING OPTIONS(description = 'Whether the order was fulfilled by Amazon (AFN) or by the seller (MFN).'),
  `fulfillment_supply_source_id` STRING OPTIONS(description = 'The sourceId of the location from where you want the order fulfilled.'),
  `has_regulated_items` BOOL OPTIONS(description = 'Whether the order contains regulated items which may require additional approval steps before being fulfilled.'),
  `is_access_point_order` BOOL OPTIONS(description = 'When true, this order is marked to be delivered to an Access Point. The access location is chosen by the customer. Access Points include Amazon Hub Lockers, Amazon Hub Counters, and pickup points operated by carriers.'),
  `is_business_order` BOOL OPTIONS(description = 'When true, the order is an Amazon Business order. An Amazon Business order is an order where the buyer is a Verified Business Buyer.'),
  `is_estimated_ship_date_set` BOOL OPTIONS(description = 'When true, the estimated ship date is set for the order. Only returned for Sourcing on Demand orders.'),
  `is_global_express_enabled` BOOL OPTIONS(description = 'When true, the order is a GlobalExpress order.'),
  `is_iba` BOOL OPTIONS(description = 'When true, the item within this order was bought and re-sold by Amazon Business EU SARL (ABEU). By buying and instantly re-selling your items, ABEU becomes the seller of record, making your inventory available for sale to customers who would not otherwise purchase from a third-party seller.'),
  `is_ispu` BOOL OPTIONS(description = 'When true, this order is marked to be picked up from a store rather than delivered.'),
  `is_premium_order` BOOL OPTIONS(description = 'When true, the order has a Premium Shipping Service Level Agreement. For more information about Premium Shipping orders, refer to "Premium Shipping Options" in the Seller Central Help for your marketplace.'),
  `is_prime` BOOL OPTIONS(description = 'When true, the order is a seller-fulfilled Amazon Prime order.'),
  `is_replacement_order` BOOL OPTIONS(description = 'When true, this is a replacement order.'),
  `is_sold_by_ab` BOOL OPTIONS(description = 'When true, the item within this order was bought and re-sold by Amazon Business EU SARL (ABEU). By buying and instantly re-selling your items, ABEU becomes the seller of record, making your inventory available for sale to customers who would not otherwise purchase from a third-party seller.'),
  `ship_service_level` STRING OPTIONS(description = 'The order\'s shipment service level.'),
  `shipment_service_level_category` STRING OPTIONS(description = 'The shipment service level category for the order. Possible values: Expedited, FreeEconomy, NextDay, Priority, SameDay, SecondDay, Scheduled, and Standard.'),
  `automated_shipping_setting_automated_carrier` STRING OPTIONS(description = 'Auto-generated carrier for SSA orders.'),
  `automated_shipping_setting_automated_ship_method` STRING OPTIONS(description = 'Auto-generated ship method for SSA orders.'),
  `automated_shipping_setting_has_automated_shipping_settings` BOOL OPTIONS(description = 'When true, this order has automated shipping settings generated by Amazon. This order could be identified as an SSA order.'),
  `default_ship_from_location_address_line_1` STRING OPTIONS(description = 'Street address of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'),
  `default_ship_from_location_address_line_2` STRING OPTIONS(description = 'Additional street address information of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'),
  `default_ship_from_location_address_line_3` STRING OPTIONS(description = 'Additional street address informatio of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'), --different than fivetran
  `default_ship_from_location_address_type` STRING OPTIONS(description = 'Address type of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'), --different than fivetran
  `default_ship_from_location_city` STRING OPTIONS(description = 'City of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'),
  `default_ship_from_location_country_code` STRING OPTIONS(description = 'Country code (two-character country code, in ISO 3166-1 alpha-2 format.) of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'),
  `default_ship_from_location_county` STRING OPTIONS(description = 'County of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'), 
  `default_ship_from_location_district` STRING OPTIONS(description = 'District of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'), --different than fivetran
  `default_ship_from_location_municipality` STRING OPTIONS(description = 'Municipality of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'), --different than fivetran
  `default_ship_from_location_name` STRING OPTIONS(description = 'Name of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'),
  `default_ship_from_location_phone` STRING OPTIONS(description = 'Associated phone number of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location. Note: In some cases, the buyer phone number is suppressed: a. Phone is suppressed for all AFN (fulfilled by Amazon) orders. b. Phone is suppressed for the shipped MFN (fulfilled by seller) order when the current date is past the Latest Delivery Date.'), --different than fivetran
  `default_ship_from_location_postal_code` STRING OPTIONS(description = 'Postal code of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'), --different than fivetran
  `default_ship_from_location_state_or_region` STRING OPTIONS(description = 'State or region of the recommended location for the seller to ship the items from. It is calculated at checkout. The seller may or may not choose to ship from this location.'), --different than fivetran
  `shipping_address_address_type` STRING OPTIONS(description = 'Address type of the shipping address for the order. Note: 1. ShippingAddress is only available for orders with the following status values: Unshipped, PartiallyShipped, Shipped and InvoiceUnconfirmed. 2. The ShippingAddress contains restricted data. Use the Restricted Data Token (RDT) and restricted SPDS roles to access the restricted data in ShippingAddress. For example, Name, AddressLine1, AddressLine2, AddressLine3, Phone, AddressType, and ExtendedFields.'), --different than fivetran
  `shipping_address_city` STRING OPTIONS(description = 'City of the shipping address for the order. Note: 1. ShippingAddress is only available for orders with the following status values: Unshipped, PartiallyShipped, Shipped and InvoiceUnconfirmed. 2. The ShippingAddress contains restricted data. Use the Restricted Data Token (RDT) and restricted SPDS roles to access the restricted data in ShippingAddress. For example, Name, AddressLine1, AddressLine2, AddressLine3, Phone, AddressType, and ExtendedFields.'),
  `shipping_address_country_code` STRING OPTIONS(description = 'Country code (two-character country code, in ISO 3166-1 alpha-2 format) of the shipping address for the order. Note: 1. ShippingAddress is only available for orders with the following status values: Unshipped, PartiallyShipped, Shipped and InvoiceUnconfirmed. 2. The ShippingAddress contains restricted data. Use the Restricted Data Token (RDT) and restricted SPDS roles to access the restricted data in ShippingAddress. For example, Name, AddressLine1, AddressLine2, AddressLine3, Phone, AddressType, and ExtendedFields.'), --different than fivetran
  `shipping_address_county` STRING OPTIONS(description = 'County of the shipping address for the order. Note: 1. ShippingAddress is only available for orders with the following status values: Unshipped, PartiallyShipped, Shipped and InvoiceUnconfirmed. 2. The ShippingAddress contains restricted data. Use the Restricted Data Token (RDT) and restricted SPDS roles to access the restricted data in ShippingAddress. For example, Name, AddressLine1, AddressLine2, AddressLine3, Phone, AddressType, and ExtendedFields.'), --different than fivetran
  `shipping_address_district` STRING OPTIONS(description = 'District of the shipping address for the order. Note: 1. ShippingAddress is only available for orders with the following status values: Unshipped, PartiallyShipped, Shipped and InvoiceUnconfirmed. 2. The ShippingAddress contains restricted data. Use the Restricted Data Token (RDT) and restricted SPDS roles to access the restricted data in ShippingAddress. For example, Name, AddressLine1, AddressLine2, AddressLine3, Phone, AddressType, and ExtendedFields.'), --different than fivetran
  `shipping_address_municipality` STRING OPTIONS(description = 'Municipality of the shipping address for the order. Note: 1. ShippingAddress is only available for orders with the following status values: Unshipped, PartiallyShipped, Shipped and InvoiceUnconfirmed. 2. The ShippingAddress contains restricted data. Use the Restricted Data Token (RDT) and restricted SPDS roles to access the restricted data in ShippingAddress. For example, Name, AddressLine1, AddressLine2, AddressLine3, Phone, AddressType, and ExtendedFields.'), --different than fivetran
  `shipping_address_postal_code` STRING OPTIONS(description = 'Postal code of the shipping address for the order. Note: 1. ShippingAddress is only available for orders with the following status values: Unshipped, PartiallyShipped, Shipped and InvoiceUnconfirmed. 2. The ShippingAddress contains restricted data. Use the Restricted Data Token (RDT) and restricted SPDS roles to access the restricted data in ShippingAddress. For example, Name, AddressLine1, AddressLine2, AddressLine3, Phone, AddressType, and ExtendedFields.'),--different than fivetran
  `shipping_address_state_or_region` STRING OPTIONS(description = 'State or region of the shipping address for the order. Note: 1. ShippingAddress is only available for orders with the following status values: Unshipped, PartiallyShipped, Shipped and InvoiceUnconfirmed. 2. The ShippingAddress contains restricted data. Use the Restricted Data Token (RDT) and restricted SPDS roles to access the restricted data in ShippingAddress. For example, Name, AddressLine1, AddressLine2, AddressLine3, Phone, AddressType, and ExtendedFields.'),
  `methods` STRING OPTIONS(description = 'Comma-separated list of payment methods used for an order. Possible individual values: COD (Cash on delivery), GC (Gift card), CVS (Convenience Store), PointsAccount (Amazon Points), Invoice, or Other.'),
  `count_order_items` INT64 OPTIONS(description = 'Count of order items associated with the order.'),
  `total_item_price_amount` NUMERIC OPTIONS(description = 'The total selling price of the order\'s line items. Note that an individual order item is an item and a quantity. This means that the value of ItemPrice is equal to the selling price of the item multiplied by the quantity ordered. ItemPrice excludes ShippingPrice and GiftWrapPrice.'),
  `item_price_currency_code` STRING OPTIONS(description = 'The three-digit currency code that the `item_price_amount` is listed in. In ISO 4217 format.'),
  `total_item_tax_amount` NUMERIC OPTIONS(description = 'The total tax on the order items\' price.'),
  `item_tax_currency_code` STRING OPTIONS(description = 'The three-digit currency code that the `item_tax_amount` is listed in. In ISO 4217 format.'),
  `total_shipping_discount_amount` NUMERIC OPTIONS(description = 'The total discount on the order\'s shipping prices.'),
  `shipping_discount_currency_code` STRING OPTIONS(description = 'The three-digit currency code that the `shipping_discount_amount` is listed in. In ISO 4217 format.'),
  `total_shipping_discount_tax_amount` NUMERIC OPTIONS(description = 'The total tax on the discount on the order\'s shipping prices.'),
  `shipping_discount_tax_currency_code` STRING OPTIONS(description = 'The three-digit currency code that the `shipping_discount_tax_amount` is listed in. In ISO 4217 format.'),
  `total_shipping_price_amount` NUMERIC OPTIONS(description = 'The total order\'s shipping price.'),
  `shipping_price_currency_code` STRING OPTIONS(description = 'The three-digit currency code that the `shipping_price_amount` is listed in. In ISO 4217 format.'),
  `total_shipping_tax_amount` NUMERIC OPTIONS(description = 'The total tax on the order\'s shipping price.'),
  `shipping_tax_currency_code` STRING OPTIONS(description = 'The three-digit currency code that the `shipping_tax_amount` is listed in. In ISO 4217 format.'),
  `total_promotion_discount_amount` NUMERIC OPTIONS(description = 'The total of all promotional discounts in the offers associated with the order.'),
  `promotion_discount_currency_code` STRING OPTIONS(description = 'The three-digit currency code that the `promotion_discount_amount` is listed in. In ISO 4217 format.'),
  `total_promotion_discount_tax_amount` NUMERIC OPTIONS(description = 'The total tax on all promotional discounts in the offers associated with the order.'),
  `promotion_discount_tax_currency_code` STRING OPTIONS(description = 'The three-digit currency code that the `promotion_discount_tax_amount` is listed in. In ISO 4217 format.'),
  `count_promotions_used` INT64 OPTIONS(description = 'The count of distinct promotions used.')
)
OPTIONS (description = 'Orders data from the Amazon Selling Partner API');